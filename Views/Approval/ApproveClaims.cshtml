@{
    ViewData["Title"] = "Approve Claims";
}
@model IEnumerable<ContractMonthlyClaimSystem.Models.Approval>

<!--AMs approve claims
    AMs should be alerted of claims waiting for approval
    Not a lot is done here, protocol is observed
   REMOVE SAMPLE DATA IN PART-->
<div class="table-container">
    <br />
    <h3>Approve Claims</h3>
    <h3>NB!:All claims must be approved within 2 working days of verification submittions</h3>
    <br />
    <h3>AM ID</h3>
    <!--HARD CODE SAMPLE DATA FOR POE, screenshots should have sample data, 5 rows of sample data-->
    <table class="table">
        <thead>
            <tr>
            <tr>
                <th>Approval ID</th>
                <th>Verification ID</th>
                <th>Claim ID</th>
                <th>PC ID</th>
                <th>IC ID</th><!--IC ID add casting, e,g IC101298-->
                <th>Qualification</th>
                <th>Module Code</th>
                <th>Semester</th>
                <th>Group</th>
                <th>Lesson Date</th>
                <th>Hours Worked</th>
                <th>Rate</th>
                <th>Total</th><!--Hours worked * rate-->
                <th>Register URL</th>
                <th>Status</th>
                <th>Action</th>
            </tr>
            </tr>
        </thead>
        <tbody>
            @foreach (var claim in Model)
            {
                <tr>
                    <td>@claim.FormattedApprovalID</td>
                    <td>@claim.FormattedVerificationId</td>
                    <td>@claim.FormattedClaimId</td>
                    <td>@claim.PCID</td>
                    <td>@claim.ICID</td>
                    <td>@claim.QualificationName</td>
                    <td>@claim.ModuleCode</td>
                    <td>@claim.Semester</td>
                    <td>@claim.Group</td>
                    <td>@claim.LessonDate</td>
                    <td>@claim.HoursWorked</td>
                    <td>@claim.Rate</td>
                    <td>@claim.Total.ToString("C", new System.Globalization.CultureInfo("en-ZA")) </td>
                    <td>
                        @if (!string.IsNullOrEmpty(claim.FileName))
                        {
                            <a href="@(Url.Content("~/claim docs/" + claim.FormattedClaimId + "/" + claim.FileName))" target="_blank">
                                @claim.FileName
                            </a>
                        }
                    </td>
                    <td>@claim.Status</td>
                    <td>
                        @if (claim.Status != "Finalized")
                        {
                            <form asp-action="FinalizeApproval" method="post">
                                <input type="hidden" name="id" value="@claim.ClaimId" />
                                <button class="btn btn-secondary  btn-sm" type="submit" name="newStatus" value="Finalized">Finalize</button>
                            </form>
                        }
                    </td>
                </tr>
            }
        </tbody>
    </table>
</div>
